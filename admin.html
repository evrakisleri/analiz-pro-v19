<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Analiz Pro v19 - Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white p-10">
    <div class="max-w-lg mx-auto bg-gray-800 p-8 rounded-xl shadow-2xl">
        <h1 class="text-2xl font-bold mb-6 text-green-500">Sistem Yönetim Paneli</h1>
        <div class="space-y-4">
            <input id="okul" placeholder="Okul Adı" class="w-full p-3 bg-gray-700 rounded">
            <input id="email" placeholder="Müdür E-posta" class="w-full p-3 bg-gray-700 rounded">
            <input id="sifre" type="password" placeholder="Müdür Şifre" class="w-full p-3 bg-gray-700 rounded">
            <button id="btnKur" class="w-full bg-green-600 p-3 rounded font-bold">SİSTEMİ KUR</button>
            <button id="btnCikis" class="w-full bg-red-600 p-3 rounded font-bold">ÇIKIŞ YAP</button>
        </div>
    </div>

    <script type="module">
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm';
        const supabase = createClient('SENIN_URL', 'SENIN_KEY');

        document.getElementById('btnKur').onclick = async () => {
            const { error: authErr } = await supabase.auth.signUp({ 
                email: document.getElementById('email').value, 
                password: document.getElementById('sifre').value 
            });
            if (authErr) return alert(authErr.message);

            const { error: rpcErr } = await supabase.rpc('kur_sistemi', { 
                okul_adi: document.getElementById('okul').value, 
                mudur_email: document.getElementById('email').value 
            });
            if (rpcErr) return alert(rpcErr.message);

            alert("✅ Sistem eksiksiz kuruldu!");
        };

        document.getElementById('btnCikis').onclick = () => supabase.auth.signOut();
    </script>
</body>
</html>
