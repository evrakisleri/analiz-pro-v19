<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Öğrenci Paneli</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white flex items-center justify-center min-h-screen p-4">
    <div class="bg-gray-900 border-2 border-green-500 p-8 rounded-2xl w-full max-w-sm text-center shadow-[0_0_20px_rgba(34,197,94,0.3)]">
        <h2 class="text-green-400 font-bold mb-6 italic text-xl">ÖĞRENCİ PANELİ</h2>
        <div class="bg-gray-800 p-4 rounded-lg mb-4">
            <p id="stdName" class="text-lg font-bold uppercase">YÜKLENİYOR...</p>
            <p id="stdClass" class="text-sm text-gray-500 mt-1">-</p>
        </div>
        <button onclick="location.reload()" class="w-full bg-green-600 p-2 rounded text-sm font-bold">VERİLERİ GÜNCELLE</button>
    </div>

    <script type="module">
        import { supabase } from './supabaseClient.js';
        async function load() {
            const { data: { user } } = await supabase.auth.getUser();
            if (!user) { window.location.href = 'index.html'; return; }

            const { data: profile } = await supabase.from('users').select('*').eq('email', user.email).single();
            if (profile) {
                document.getElementById('stdName').innerText = profile.full_name;
                document.getElementById('stdClass').innerText = "Sınıf: " + profile.class_branch;
            }
        }
        load();
    </script>
</body>
</html>
