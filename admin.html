<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-950 text-white p-10">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-blue-500 mb-8">MASTER ADMIN - ANALİZ PRO V19</h1>
        
        <div class="bg-gray-900 p-6 rounded-xl shadow-lg">
            <h2 class="text-xl mb-4 font-semibold">Kullanıcı Yönetim Paneli</h2>
            <table class="w-full text-left">
                <thead>
                    <tr class="border-b border-gray-700 text-gray-400">
                        <th class="p-2">İsim</th>
                        <th class="p-2">Rol</th>
                        <th class="p-2">İşlem</th>
                    </tr>
                </thead>
                <tbody id="userTable">
                    </tbody>
            </table>
        </div>
    </div>

    <script type="module">
        import { supabase } from './supabaseClient.js';

        async function loadUsers() {
            const { data: users, error } = await supabase.from('profiles').select('*');
            if (error) return;
            
            const tbody = document.getElementById('userTable');
            tbody.innerHTML = users.map(user => `
                <tr class="border-b border-gray-800">
                    <td class="p-2">${user.full_name}</td>
                    <td class="p-2">${user.role}</td>
                    <td class="p-2">
                        <button onclick="deleteUser('${user.id}')" class="text-red-500 hover:text-red-300">Sil</button>
                    </td>
                </tr>
            `).join('');
        }

        window.deleteUser = async (id) => {
            if(confirm("Bu kullanıcıyı silmek istediğine emin misin?")) {
                await supabase.from('profiles').delete().eq('id', id);
                loadUsers();
            }
        };

        loadUsers();
    </script>
</body>
</html>
