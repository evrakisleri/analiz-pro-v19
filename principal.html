<!DOCTYPE html>
<html lang="tr">
<head><script src="https://cdn.tailwindcss.com"></script></head>
<body class="bg-black text-white p-8">
    <h1 class="text-2xl font-bold mb-4">Müdür Paneli: Otomatik Öğrenci Atama</h1>
    <input type="file" id="csvFile" class="mb-4">
    <button id="uploadBtn" class="bg-green-600 p-2 rounded">YÜKLE</button>
    <script type="module">
        import { supabase } from './supabaseClient.js';
        document.getElementById('uploadBtn').onclick = async () => {
            const file = document.getElementById('csvFile').files[0];
            const reader = new FileReader();
            reader.onload = async (e) => {
                const lines = e.target.result.split('\n');
                for (let line of lines) {
                    const [full_name, class_branch] = line.split(',');
                    const pass = Math.random().toString(36).slice(-8);
                    await supabase.from('profiles').insert([{ full_name, class_branch, role: 'student', password: pass }]);
                }
                alert("Öğrenciler şifreleriyle kaydedildi.");
            };
            reader.readAsText(file);
        };
    </script>
</body>
</html>
